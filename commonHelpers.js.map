{"version":3,"file":"commonHelpers.js","sources":["../src/js/workWithCart.js","../src/js/shopping-cart.js","../src/js/cartmodalwindow.js"],"sourcesContent":["import { getCartItems } from \"./localStorage\";\n\n/* \n–î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—É –¥–æ –∫–æ—Ä–∑–∏–Ω–∫–∏ –ø–æ ID\n  –ü–∞—Ä–∞–º–µ—Ç—Ä–∏:\n    idProduct - –Ü–¥ –ø—Ä–æ–¥—É–∫—Ç—É                     <---  ( !!! –û–±–æ–≤—è–∑–∫–æ–≤–æ !!! )\n    amount - –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ü—å–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç—É –≤ –∫–æ—à–∏–∫—É  <---  ( –ú–æ–∂–Ω–∞ –Ω–µ –≤–∫–∞–∑—É–≤–∞—Ç–∏ )\n  –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:\n    –ö–æ–ª–∏ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ–π, –ø—Ä–∏ —è–∫–æ–º—É –≤–∏ –¥–æ–¥–∞—î—Ç–µ, —Ç–æ–≤–∞—Ä –¥–æ –∫–æ—à–∏–∫—É\n    –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é\n\n    addProductToCart( –Ü–¥ —Ç–æ–≤–∞—Ä—É —Ç—É—Ç–∞ üòä )\n==========================================================================*/\nexport function addProductToCart(idProduct, amount = 1) {\n  const cartItems = getCartItems();\n\n  if (!cartItems.products.find(({ id }) => id === idProduct)) {\n    cartItems.products.push({ \"id\": idProduct, \"amount\": amount });\n    localStorage.setItem('shoppingCartItems', JSON.stringify(cartItems));\n  }\n}\n\n/* \n–í–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—É –∑ –∫–æ—Ä–∑–∏–Ω–∫–∏ –ø–æ ID\n  –ü–∞—Ä–∞–º–µ—Ç—Ä–∏:\n    idProduct - –Ü–¥ –ø—Ä–æ–¥—É–∫—Ç—É                     <---  ( !!! –û–±–æ–≤—è–∑–∫–æ–≤–æ !!! )\n  –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:\n    –ü–µ—Ä–µ–¥–∞—î—Ç–µ id –ø—Ä–æ–¥—É–∫—Ç—É –≤ —Ñ—É–Ω–∫—Ü—ñ—é, —â–æ–± –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –ø—Ä–æ–¥—É–∫—Ç\n    \n    removeProductFromCart( –Ü–¥ —Ç–æ–≤–∞—Ä—É —Ç—É—Ç–∞ üòä )\n==========================================================================*/\nexport function removeProductFromCart(idProduct) {\n  const cartItems = getCartItems();\n\n  // –ó–Ω–∞–π—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç —É –∫–æ—à–∏–∫—É –∑–∞ –π–æ–≥–æ ID\n  const productIndex = cartItems.products.findIndex(({ id }) => id === idProduct);\n  \n  // –Ø–∫—â–æ –ø—Ä–æ–¥—É–∫—Ç –∑–Ω–∞–π–¥–µ–Ω–æ, –≤–∏–¥–∞–ª–∏—Ç–∏ –π–æ–≥–æ –∑ –∫–æ—à–∏–∫–∞\n  if (productIndex !== -1) {\n    cartItems.products.splice(productIndex, 1);\n    localStorage.setItem('shoppingCartItems', JSON.stringify(cartItems));\n  }\n}\n\n/* \n–í–∏–¥–∞–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ –∑ –∫–æ—Ä–∑–∏–Ω–∫–∏\n  –ü–∞—Ä–∞–º–µ—Ç—Ä–∏:\n    –ù–µ–º–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤\n  –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:\n    –ö–æ–ª–∏ –≤–∏ —Ö–æ—á–µ—Ç–µ –æ—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—à–∏–∫, –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é\n\n    removeAllProductsFromCart()\n==========================================================================*/\nexport function removeAllProductsFromCart() {\n  const cartItems = getCartItems();\n\n  // –í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ –∑ –∫–æ—à–∏–∫–∞\n  cartItems.products = [];\n  localStorage.setItem('shoppingCartItems', JSON.stringify(cartItems));\n}\n\n/* \n–û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ –≤ –∫–æ—à–∏–∫—É\n  –ü–∞—Ä–∞–º–µ—Ç—Ä–∏:\n    –ù–µ–º–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤\n==========================================================================*/\nexport function getTotalProductCount() {\n  return getCartItems().products.length;\n}\n\n/* \n–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—è email –≤ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è \n  –ü–∞—Ä–∞–º–µ—Ç—Ä–∏: \n    email - Email –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞                       <‚Äî ( !!! –û–±–æ–≤—è–∑–∫–æ–≤–æ !!! ) \n==========================================================================*/\nexport function setEmailToOrderInfo(email) {\n  const order = getCartItems();\n\n  // –í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ –∑ –∫–æ—à–∏–∫–∞\n  order.email = email;\n  localStorage.setItem('shoppingCartItems', JSON.stringify(order));\n}","import { getProdByIDWithParams } from './query';\nimport icons from '../images/sprite.svg';\nimport { getCartItems } from './localStorage';\nimport {\n  addProductToCart,\n  setEmailToOrderInfo,\n  removeAllProductsFromCart,\n  removeProductFromCart,\n} from './workWithCart';\n\nconst list = document.querySelector('.js-cart-list');\nconst formInput = document.querySelector('.cart-form-input');\nconst summ = document.querySelector('.js-total-summ');\nconst cartNumbersList = document.querySelectorAll('.js-cart-numbers');\nconst clearOrderBtn = document.querySelector('.js-clear-order-btn');\n\nconst cartBox = document.querySelector('.js-cart-box');\nconst emptyCart = document.querySelector('.js-empty-cart');\n\naddProductToCart('640c2dd963a319ea671e383b', 3);\naddProductToCart('640c2dd963a319ea671e3864');\naddProductToCart('640c2dd963a319ea671e3865');\naddProductToCart('640c2dd963a319ea671e366d');\naddProductToCart('640c2dd963a319ea671e366c');\n\nsetEmailToOrderInfo('zgerzanic@gmail.com');\n\nlet arrCart = getCartItems();\nlet totalSumm = 0;\ndrawCartPage();\n\nlist.addEventListener('click', e => {\n  if (e.target.classList.contains('delete-btn')) {\n    let parent = e.target.closest('.selectedProduct');\n    console.log(parent);\n    removeProductFromCart(parent.dataset.id);\n    drawCartPage();\n  }\n});\n\nasync function drawCartPage() {\n  //–º–∞—Å–∏–≤ –∑ localStorage\n  arrCart = getCartItems();\n  console.log(arrCart);\n\n  const amountElements = arrCart.products.length;\n  switchSections(amountElements);\n\n  if (amountElements) {\n    list.innerHTML = '';\n    //–º–∞—Å–∏–≤ –∑ –°–µ—Ä–≤–µ—Ä—É\n    const originProductList = await getCartProducts(arrCart.products);\n    console.log(originProductList);\n\n    cartNumbersUpdate(cartNumbersList, amountElements);\n    // console.log(cartBox);\n    spawnCardProducts(originProductList);\n  }\n  summ.textContent = '$' + getTotalSumm(originProductList);\n  // updateCartBasket();\n  formInput.value = arrCart.email;\n}\n\nclearOrderBtn.addEventListener('click', () => {\n  removeAllProductsFromCart();\n  drawCartPage();\n});\n\nfunction spawnCardProducts(products) {\n  generateCardListMarkup(products, createCartProductMarkup).then(result => {\n    list.insertAdjacentHTML('beforeend', result);\n  });\n}\n\n/*  –ü–∞—Ä–∞–º–µ—Ç—Ä–∏:\n      1.productList - –º–∞—Å–∏–≤ –∑ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏      \n        [{\n          id: '640c2dd963a319ea671e383b',\n          amount: 1,\n        }]\n\n      2.createElementMarkupFunc - –§—É–Ω–∫—Ü—ñ—è, —â–æ —Å—Ç–≤–æ—Ä—é—î –ø–æ—Ç—Ä—ñ–±–Ω—É –≤–∞–º —Ä–æ–∑–º—ñ—Ç–∫—É –µ–ª–µ–º–µ–Ω—Ç–∞.\n\n    –ü–æ–≤–µ—Ä—Ç–∞—î html —Ä–æ–∑–º—ñ—Ç–∫—É –ø—Ä–æ–¥—É–∫—Ç—ñ–≤\n===================================================================================== */\nasync function generateCardListMarkup(productList, createElementMarkupFunc) {\n  return productList\n    .map(product => {\n      totalSumm += product.price;\n      return createElementMarkupFunc(product);\n    })\n    .join('');\n}\n\n/*  –ü–∞—Ä–∞–º–µ—Ç—Ä–∏:\n      1.productList - –º–∞—Å–∏–≤ –∑ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏      \n        [{\n          id: '640c2dd963a319ea671e383b',\n          amount: 1,\n        }]\n\n    –ü–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤ –¥–∞–Ω–∏—Ö –∑ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤\n===================================================================================== */\nasync function getCartProducts(productList) {\n  return await Promise.all(\n    productList.map(({ id }) =>\n      getProdByIDWithParams(id).then(rqst => rqst.data)\n    )\n  );\n}\n\n//\n\n//\n\n// —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç—Ç–∫–∏ –≤ –∫–æ—à–∏–∫—É\nfunction createCartProductMarkup(product) {\n  const { _id, name, img, category, price, size } = product;\n  const cleanedCategory = category.replace(/_/g, ' ');\n\n  return `\n    <li class=\"selectedProduct\" data-id=${_id}>\n      <div class=\"product-picture\">\n          <img src=\"${img}\" alt=\"${name}\" class=\"\" loading=\"lazy\" />\n      </div>\n\n      <div class=\"product-info-container\">\n\n      <div class=\"info-header\">\n        <h2 class=\"product-name\">${name}</h2>\n        <button class=\"delete-btn\">\n\n          <svg class=\"\" width=\"11.25\" height=\"11.25\">\n\n            <use href=\"${icons}#icon-Cross_close\"></use>\n          </svg>\n        </button>\n      </div>\n\n      <div class=\"product-info\">\n        <p class=\"info-quality-category\"> Category: <span class=\"info-value\">${cleanedCategory}</span></p>\n        <p class=\"info-quality\"> Size:<span class=\"info-value\">${size}</span></p>\n      </div>\n        <div class=\"price\">$\n          <span>${price}</span>\n        </div>\n      </div>\n      <div class=\"counter-container\">\n            <button class=\"counter-btn\" type=\"button\" data-action=\"decrement\">\n                -\n            </button>\n            <span class=\"counter-value\">1</span>\n            <button class=\"counter-btn\" type=\"button\" data-action=\"increment\">\n                +\n            </button>\n        </div>\n  </li>`;\n}\n\nfunction switchSections(bool) {\n  objHide(cartBox, emptyCart);\n  if (bool) {\n    objShow(cartBox);\n  } else {\n    objShow(emptyCart);\n  }\n}\n\nfunction objShow(...objs) {\n  objs.forEach(obj => {\n    obj.classList.remove('hiden');\n  });\n}\n\nfunction objHide(...objs) {\n  objs.forEach(obj => {\n    obj.classList.add('hiden');\n  });\n}\n\nfunction cartNumbersUpdate(objs, number) {\n  objs.forEach(obj => {\n    obj.textContent = number;\n  });\n}\n\nfunction getTotalSumm(products) {\n  return products.reduce((sum, product) => {\n    console.log(product);\n    return sum + product.price;\n  }, 0);\n}\n","const form = document.querySelector('.cart-form');\nconst modalCloseBtn = document.querySelector('.js-modal-close');\nconst modal = document.querySelector('.cart-modal-bg');\n\nconsole.log(\"Modal js\");\n\nform.addEventListener('submit', modalOpen);\nmodalCloseBtn.addEventListener('click', modalClose);\n\nfunction modalOpen(e) {\n  e.preventDefault();\n  modal.classList.remove('hiden');\n}\nfunction modalClose() {\n  modal.classList.add('hiden');\n}\n\n"],"names":["addProductToCart","idProduct","amount","cartItems","getCartItems","id","removeProductFromCart","productIndex","removeAllProductsFromCart","setEmailToOrderInfo","email","order","list","formInput","summ","cartNumbersList","clearOrderBtn","cartBox","emptyCart","arrCart","totalSumm","drawCartPage","e","parent","amountElements","switchSections","originProductList","getCartProducts","cartNumbersUpdate","spawnCardProducts","getTotalSumm","products","generateCardListMarkup","createCartProductMarkup","result","productList","createElementMarkupFunc","product","getProdByIDWithParams","rqst","_id","name","img","category","price","size","cleanedCategory","icons","bool","objHide","objShow","objs","obj","number","sum","form","modalCloseBtn","modal","modalOpen","modalClose"],"mappings":"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"}