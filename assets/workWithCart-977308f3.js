import{a as c}from"./vendor-8aa786c2.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const p="https://food-boutique.b.goit.study/api/products",f="https://food-boutique.b.goit.study/api/subscription",g="categories",y="popular",I="discount",a={MAIN_URL:p,SECOND_URL:f,categories:g,popular:y,discount:I};let h=1,d=6;async function B(){return window.innerWidth>=768&&(d=8,window.innerWidth>=1440&&(d=9)),await c(`${a.MAIN_URL}?page=${h}&limit=${d}`)}async function q(){return await c(`${a.MAIN_URL}/${a.popular}?limit=5`)}async function v(){return await c(`${a.MAIN_URL}/${a.discount}`)}async function A(t){return await c(`${a.MAIN_URL}/${t}`)}async function J(t){return await c(`${a.MAIN_URL}/${t}`)}async function M(){return await c(`${a.MAIN_URL}/${a.categories}`)}async function _({keyword:t=null,category:o=null,byABC:r=null,byPrice:s=null,byPopularity:e=null,page:n=1,limitPerPage:u=6}){window.innerWidth>=1440?u=9:window.innerWidth>=768&&(u=8);let i="https://food-boutique.b.goit.study/api/products?";return t&&(i+=`keyword=${t}&`),o&&(i+=`category=${o}&`),r!==null&&(i+=`byABC=${r}&`),s!==null&&(i+=`byPrice=${s}&`),e!==null&&(i+=`byPopularity=${e}&`),i+=`page=${n}&limit=${u}`,console.log(i),await c(i)}async function S(t){return c.post(`${a.SECOND_URL}`,{email:t})}function m(t,o){const r=document.querySelector("[data-modal]"),s=r.querySelector(".modal-title"),e=r.querySelector(".modal-text");s.textContent=t,e.textContent=o,r.classList.remove("is-hidden")}function N(){document.querySelector("[data-modal]").classList.add("is-hidden")}const P=document.getElementById("subscriptionForm");P.addEventListener("submit",async function(t){t.preventDefault();const r=document.getElementById("emailInput").value;S(r).then(s=>{s.data,m("Thanks for subscribing for new products","We promise you organic and high-quality products that will meet your expectations. Please stay with us and we promise you many pleasant surprises.")}).catch(s=>{const e=s.response?"This email address has already been entered":"An error occurred";m(e,"You have already subscribed to our new products. Watch for offers at the mailing address.")})});const b=document.querySelector("[data-modal-close]");b.addEventListener("click",N);const x="/Second_Team-project-2023/assets/sprite-67d7c706.svg";let w={email:"",products:[]};function R(){const t={keyword:null,category:null,byABC:!0,byPrice:null,byPopularity:null,page:1,limit:6};return localStorage.setItem("filterParams",JSON.stringify(t)),O()}function U(t){localStorage.setItem("filterParams",JSON.stringify(t))}JSON.parse(localStorage.getItem("shoppingCartItems"))||localStorage.setItem("shoppingCartItems",JSON.stringify(w));function C(){return JSON.parse(localStorage.getItem("shoppingCartItems")).products.length}function l(){return JSON.parse(localStorage.getItem("shoppingCartItems"))}function O(){return JSON.parse(localStorage.getItem("filterParams"))}const $=document.querySelector(".cart-number");$.insertAdjacentHTML("beforeend",C());function D(t,o=1){const r=l();r.products.find(({id:s})=>s===t)||(r.products.push({id:t,amount:o}),localStorage.setItem("shoppingCartItems",JSON.stringify(r)))}function E(t,o){const r=l(),s=r.products.find(({id:e})=>e===t);s&&(s.amount=o,localStorage.setItem("shoppingCartItems",JSON.stringify(r)))}function T(t){const o=l(),r=o.products.findIndex(({id:s})=>s===t);r!==-1&&(o.products.splice(r,1),localStorage.setItem("shoppingCartItems",JSON.stringify(o)))}function F(){const t=l();t.products=[],localStorage.setItem("shoppingCartItems",JSON.stringify(t))}function W(t){const o=l();o.email=t,localStorage.setItem("shoppingCartItems",JSON.stringify(o))}export{F as a,J as b,W as c,R as d,B as e,U as f,l as g,_ as h,O as i,A as j,v as k,q as l,M as m,D as n,T as r,x as s,E as u};
//# sourceMappingURL=workWithCart-977308f3.js.map
