import{a as c}from"./vendor-8aa786c2.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();const g="https://food-boutique.b.goit.study/api/products",y="https://food-boutique.b.goit.study/api/subscription",I="categories",h="popular",S="discount",a={MAIN_URL:g,SECOND_URL:y,categories:I,popular:h,discount:S};let N=1,d=6;async function q(){return window.innerWidth>=768&&(d=8,window.innerWidth>=1440&&(d=9)),await c(`${a.MAIN_URL}?page=${N}&limit=${d}`)}async function v(){return await c(`${a.MAIN_URL}/${a.popular}?limit=5`)}async function A(){return await c(`${a.MAIN_URL}/${a.discount}`)}async function J(t){return await c(`${a.MAIN_URL}/${t}`)}async function M(t){return await c(`${a.MAIN_URL}/${t}`)}async function E(){return await c(`${a.MAIN_URL}/${a.categories}`)}async function _({keyword:t=null,category:o=null,byABC:r=null,byPrice:n=null,byPopularity:e=null,page:s=1,limitPerPage:u=6}){window.innerWidth>=1440?u=9:window.innerWidth>=768&&(u=8);let i="https://food-boutique.b.goit.study/api/products?";return t&&(i+=`keyword=${t}&`),o&&(i+=`category=${o}&`),r!==null&&(i+=`byABC=${r}&`),n!==null&&(i+=`byPrice=${n}&`),e!==null&&(i+=`byPopularity=${e}&`),i+=`page=${s}&limit=${u}`,console.log(i),await c(i)}async function b(t){return c.post(`${a.SECOND_URL}`,{email:t})}function p(t,o){const r=document.querySelector("[data-modal]"),n=r.querySelector(".modal-title"),e=r.querySelector(".modal-text");n.textContent=t,e.textContent=o,r.classList.remove("is-hidden")}function m(){document.querySelector("[data-modal]").classList.add("is-hidden")}const w=document.getElementById("subscriptionForm");w.addEventListener("submit",async function(t){t.preventDefault();const r=document.getElementById("emailInput").value;b(r).then(n=>{n.data,p("Thanks for subscribing for new products","We promise you organic and high-quality products that will meet your expectations. Please stay with us and we promise you many pleasant surprises.")}).catch(n=>{const e=n.response?"This email address has already been entered":"An error occurred";p(e,"You have already subscribed to our new products. Watch for offers at the mailing address.")})});const P=document.querySelector("[data-modal-close]");P.addEventListener("click",m);document.addEventListener("keydown",function(t){const o=document.querySelector("[data-modal]");t.key==="Escape"&&!o.classList.contains("is-hidden")&&m()});const f=document.querySelector("[data-modal]");f.addEventListener("click",function(t){t.target===f&&m()});const x="/Second_Team-project-2023/assets/sprite-efb7e146.svg";let C={email:"",products:[]};function R(){const t={keyword:null,category:null,byABC:!0,byPrice:null,byPopularity:null,page:1,limit:6};return localStorage.setItem("filterParams",JSON.stringify(t)),O()}function U(t){localStorage.setItem("filterParams",JSON.stringify(t))}JSON.parse(localStorage.getItem("shoppingCartItems"))||localStorage.setItem("shoppingCartItems",JSON.stringify(C));function L(){return JSON.parse(localStorage.getItem("shoppingCartItems")).products.length}function l(){return JSON.parse(localStorage.getItem("shoppingCartItems"))}function O(){return JSON.parse(localStorage.getItem("filterParams"))}const $=document.querySelector(".cart-number");$.insertAdjacentHTML("beforeend",L());function D(t,o=1){const r=l();r.products.find(({id:n})=>n===t)||(r.products.push({id:t,amount:o}),localStorage.setItem("shoppingCartItems",JSON.stringify(r)))}function T(t,o){const r=l(),n=r.products.find(({id:e})=>e===t);n&&(n.amount=o,localStorage.setItem("shoppingCartItems",JSON.stringify(r)))}function k(t){const o=l(),r=o.products.findIndex(({id:n})=>n===t);r!==-1&&(o.products.splice(r,1),localStorage.setItem("shoppingCartItems",JSON.stringify(o)))}function F(){const t=l();t.products=[],localStorage.setItem("shoppingCartItems",JSON.stringify(t))}function W(t){const o=l();o.email=t,localStorage.setItem("shoppingCartItems",JSON.stringify(o))}export{F as a,M as b,W as c,R as d,q as e,U as f,l as g,_ as h,O as i,J as j,A as k,v as l,E as m,D as n,k as r,x as s,T as u};
//# sourceMappingURL=workWithCart-5e9a4738.js.map
