import{a as i}from"./vendor-8aa786c2.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const g="https://food-boutique.b.goit.study/api/products",y="https://food-boutique.b.goit.study/api/subscription",I="categories",h="popular",S="discount",a={MAIN_URL:g,SECOND_URL:y,categories:I,popular:h,discount:S};let b=1,d=6;async function q(){return window.innerWidth>=768&&(d=8,window.innerWidth>=1440&&(d=9)),await i(`${a.MAIN_URL}?page=${b}&limit=${d}`)}async function v(){return await i(`${a.MAIN_URL}/${a.popular}?limit=5`)}async function A(){return await i(`${a.MAIN_URL}/${a.discount}`)}async function J(t){return await i(`${a.MAIN_URL}/${t}`)}async function M(t){return await i(`${a.MAIN_URL}/${t}`)}async function E(){return await i(`${a.MAIN_URL}/${a.categories}`)}async function _({keyword:t=null,category:o=null,byABC:r=null,byPrice:s=null,byPopularity:e=null,page:n=1,limitPerPage:u=6}){window.innerWidth>=1440?u=9:window.innerWidth>=768&&(u=8);let c="https://food-boutique.b.goit.study/api/products?";return t&&(c+=`keyword=${t}&`),o&&(c+=`category=${o}&`),r!==null&&(c+=`byABC=${r}&`),s!==null&&(c+=`byPrice=${s}&`),e!==null&&(c+=`byPopularity=${e}&`),c+=`page=${n}&limit=${u}`,console.log(c),await i(c)}async function w(t){return i.post(`${a.SECOND_URL}`,{email:t})}async function x(t){return await i.post("https://food-boutique.b.goit.study/api/orders",t)}function p(t,o){const r=document.querySelector("[data-modal]"),s=r.querySelector(".modal-title"),e=r.querySelector(".modal-text");s.textContent=t,e.textContent=o,r.classList.remove("is-hidden")}function m(){document.querySelector("[data-modal]").classList.add("is-hidden")}const N=document.getElementById("subscriptionForm");N.addEventListener("submit",async function(t){t.preventDefault();const r=document.getElementById("emailInput").value;w(r).then(s=>{s.data,p("Thanks for subscribing for new products","We promise you organic and high-quality products that will meet your expectations. Please stay with us and we promise you many pleasant surprises.")}).catch(s=>{const e=s.response?"This email address has already been entered":"An error occurred";p(e,"You have already subscribed to our new products. Watch for offers at the mailing address.")})});const P=document.querySelector("[data-modal-close]");P.addEventListener("click",m);document.addEventListener("keydown",function(t){const o=document.querySelector("[data-modal]");t.key==="Escape"&&!o.classList.contains("is-hidden")&&m()});const f=document.querySelector("[data-modal]");f.addEventListener("click",function(t){t.target===f&&m()});const R="/Second_Team-project-2023/assets/sprite-efb7e146.svg";let C={email:"",products:[]};function U(){const t={keyword:null,category:null,byABC:!0,byPrice:null,byPopularity:null,page:1,limit:6};return localStorage.setItem("filterParams",JSON.stringify(t)),O()}function D(t){localStorage.setItem("filterParams",JSON.stringify(t))}JSON.parse(localStorage.getItem("shoppingCartItems"))||localStorage.setItem("shoppingCartItems",JSON.stringify(C));function L(){return JSON.parse(localStorage.getItem("shoppingCartItems")).products.length}function l(){return JSON.parse(localStorage.getItem("shoppingCartItems"))}function O(){return JSON.parse(localStorage.getItem("filterParams"))}const $=document.querySelector(".cart-number");$.insertAdjacentHTML("beforeend",L());function T(t,o=1){const r=l();r.products.find(({id:s})=>s===t)||(r.products.push({id:t,amount:o}),localStorage.setItem("shoppingCartItems",JSON.stringify(r)))}function k(t,o){const r=l(),s=r.products.find(({id:e})=>e===t);s&&(s.amount=o,localStorage.setItem("shoppingCartItems",JSON.stringify(r)))}function F(t){const o=l(),r=o.products.findIndex(({id:s})=>s===t);r!==-1&&(o.products.splice(r,1),localStorage.setItem("shoppingCartItems",JSON.stringify(o)))}function W(){const t=l();t.products=[],localStorage.setItem("shoppingCartItems",JSON.stringify(t))}function j(t){const o=l();o.email=t,localStorage.setItem("shoppingCartItems",JSON.stringify(o))}export{W as a,M as b,j as c,J as d,_ as e,q as f,l as g,U as h,O as i,D as j,A as k,v as l,E as m,T as n,x as p,F as r,R as s,k as u};
//# sourceMappingURL=workWithCart-283d37ab.js.map
